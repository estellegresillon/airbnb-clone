{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"next/router\";\nimport RestaurantList from \"./restaurant-list\";\nimport Map from \"./map\";\nimport Filters from \"./filters\";\nimport Key from \"../common/key\";\nimport { setRestaurants } from \"../../actions\";\n\nconst Restaurants = props => {\n  const {\n    restaurants,\n    setRestaurants,\n    sortedRestaurants,\n    searchedRestaurant,\n    router\n  } = props;\n  const {\n    0: listNumber,\n    1: setListNumber\n  } = useState(null);\n  const {\n    0: listedRestaurants,\n    1: setListedRestaurants\n  } = useState(restaurants); // load restaurants and sort them\n\n  useEffect(() => {\n    setRestaurants();\n  }, [setRestaurants]); // filters restaurants\n\n  useEffect(() => {\n    // 1 - priority on autocomplete, displays only one restaurant\n    // 2 - if not any restaurant is searched, display the filtered Restaurants\n    // 3 - if not any restaurant is searched nor filtered, displays all Restaurants\n    // never display 0 Restaurants\n    if (searchedRestaurant) {\n      setListNumber(1);\n      setListedRestaurants(searchedRestaurant);\n    } else {\n      if (sortedRestaurants.length) {\n        setListNumber(sortedRestaurants.length);\n        setListedRestaurants(sortedRestaurants);\n      } else {\n        setListNumber(restaurants.length);\n        setListedRestaurants(restaurants);\n      }\n    }\n  }, [restaurants, sortedRestaurants, searchedRestaurant]);\n  return __jsx(\"div\", {\n    className: \"restaurants-page-wrapper\"\n  }, __jsx(Filters, {\n    homeArr: router ? router.query.homeArr : \"Tous les arr.\",\n    homeType: router ? router.query.homeType : \"Tous les types\"\n  }), __jsx(\"div\", {\n    className: \"counter-keys-wrapper\"\n  }, __jsx(\"div\", {\n    className: \"restaurant-counter\"\n  }, listNumber, listNumber === 1 ? \" restaurant correspond à votre recherche.\" : \" restaurants correspondent à votre recherche.\"), __jsx(Key, {\n    listedRestaurants: listedRestaurants\n  })), __jsx(\"div\", {\n    className: \"main-view\"\n  }, __jsx(RestaurantList, {\n    listedRestaurants: listedRestaurants\n  }), __jsx(Map, {\n    listedRestaurants: listedRestaurants\n  })));\n};\n\nconst mapStateToProps = state => {\n  return {\n    restaurants: state.restaurants,\n    searchedRestaurant: state.searchedRestaurant,\n    sortedRestaurants: state.sortedRestaurants\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    setRestaurants\n  }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Restaurants));","map":{"version":3,"sources":["/Users/estellegresillon/Code/airbnb-redux/src/components/restaurants/restaurants.jsx"],"names":["React","useState","useEffect","bindActionCreators","connect","withRouter","RestaurantList","Map","Filters","Key","setRestaurants","Restaurants","props","restaurants","sortedRestaurants","searchedRestaurant","router","listNumber","setListNumber","listedRestaurants","setListedRestaurants","length","query","homeArr","homeType","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"next/router\";\n\nimport RestaurantList from \"./restaurant-list\";\nimport Map from \"./map\";\nimport Filters from \"./filters\";\nimport Key from \"../common/key\";\n\nimport { setRestaurants } from \"../../actions\";\n\nconst Restaurants = props => {\n  const { restaurants, setRestaurants, sortedRestaurants, searchedRestaurant, router } = props;\n  const [listNumber, setListNumber] = useState(null);\n  const [listedRestaurants, setListedRestaurants] = useState(restaurants);\n\n  // load restaurants and sort them\n  useEffect(() => { setRestaurants(); }, [setRestaurants]);\n\n  // filters restaurants\n  useEffect(() => {\n    // 1 - priority on autocomplete, displays only one restaurant\n    // 2 - if not any restaurant is searched, display the filtered Restaurants\n    // 3 - if not any restaurant is searched nor filtered, displays all Restaurants\n    // never display 0 Restaurants\n    if (searchedRestaurant) {\n      setListNumber(1)\n      setListedRestaurants(searchedRestaurant)\n    } else {\n      if (sortedRestaurants.length) {\n        setListNumber(sortedRestaurants.length)\n        setListedRestaurants(sortedRestaurants)\n      } else {\n        setListNumber(restaurants.length)\n        setListedRestaurants(restaurants)\n      }\n    }\n  }, [restaurants, sortedRestaurants, searchedRestaurant]);\n\n  return (\n    <div className=\"restaurants-page-wrapper\">\n      <Filters homeArr={router ? router.query.homeArr : \"Tous les arr.\"} homeType={router ? router.query.homeType  : \"Tous les types\"} />\n      <div className=\"counter-keys-wrapper\">\n        <div className=\"restaurant-counter\">\n          {listNumber}\n          {listNumber === 1 ? \" restaurant correspond à votre recherche.\" : \" restaurants correspondent à votre recherche.\"}\n        </div>\n        <Key listedRestaurants={listedRestaurants} />\n      </div>\n      <div className=\"main-view\">\n        <RestaurantList listedRestaurants={listedRestaurants} />\n        <Map listedRestaurants={listedRestaurants} />\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => {\n  return { \n    restaurants: state.restaurants,\n    searchedRestaurant: state.searchedRestaurant,\n    sortedRestaurants: state.sortedRestaurants\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({ setRestaurants }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Restaurants));\n"]},"metadata":{},"sourceType":"module"}