{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport Router from \"next/router\";\nimport { withRouter } from \"next/router\";\nimport { setRestaurants } from \"../../actions\";\nimport PopIn from \"./pop-in\";\nimport TopSection from \"./top-section\";\nimport MiddleSection from \"./middle-section\";\nimport BottomSection from \"./bottom-section\";\nimport Footer from \"./footer\";\n\nvar Detail = function Detail(props) {\n  var setRestaurants = props.setRestaurants,\n      restaurants = props.restaurants,\n      router = props.router;\n\n  var _useState = useState({}),\n      restaurant = _useState[0],\n      setRestaurant = _useState[1];\n\n  var _useState2 = useState(false),\n      hasSeenSuggestion = _useState2[0],\n      setHasSeenSuggestion = _useState2[1];\n\n  var _useState3 = useState([]),\n      similarRestaurants = _useState3[0],\n      setSimilarRestaurants = _useState3[1];\n\n  var nextRestaurantRef = useRef(null);\n  var previousRestaurantRef = useRef(null);\n  var detailPageTop = useRef(null);\n  var listedRestaurants = router.query.listedRestaurants;\n\n  var setNavigation = function setNavigation(restaurantList) {\n    var previous;\n    var next;\n    restaurantList.forEach(function (val, i) {\n      if (val.id.toString() === router.query.id) {\n        previous = restaurantList[i - 1];\n        next = restaurantList[i + 1];\n      }\n\n      ;\n    });\n\n    if (previous) {\n      previousRestaurantRef.current = previous.id;\n    } else previousRestaurantRef.current = null;\n\n    if (next) {\n      nextRestaurantRef.current = next.id;\n    } else nextRestaurantRef.current = null;\n  };\n\n  var scrollToTop = function scrollToTop() {\n    detailPageTop.current.scrollIntoView();\n  }; // if a user arrives on the pageId directly \n  // he doesn't get the restaurantS or listedRestaurantS objects in the props\n\n\n  useEffect(function () {\n    if (!router.query.restaurant) {\n      setRestaurants();\n    }\n  }, [router.query.restaurant, setRestaurants]);\n  useEffect(function () {\n    if (router.query.listedRestaurants) {\n      setNavigation(router.query.listedRestaurants);\n    } else {\n      setNavigation(restaurants);\n    }\n\n    ;\n\n    if (router.query.restaurant) {\n      setRestaurant(router.query.restaurant);\n\n      var filterByType = _toConsumableArray(restaurants).filter(function (val) {\n        if (val.type && val.name !== router.query.restaurant.name) {\n          return val.type === router.query.restaurant.type;\n        } else return null;\n      });\n\n      setSimilarRestaurants(filterByType.slice(0, 9));\n    } else {\n      var detailRestaurant = _toConsumableArray(restaurants).filter(function (val) {\n        if (val.id) {\n          return val.id.toString() === router.query.id;\n        } else return null;\n      });\n\n      setRestaurant(detailRestaurant[0]);\n\n      var _filterByType = _toConsumableArray(restaurants).filter(function (val) {\n        if (val.type && val.name !== detailRestaurant[0].name) {\n          return val.type === detailRestaurant[0].type;\n        } else return null;\n      });\n\n      setSimilarRestaurants(_filterByType.slice(0, 9));\n    }\n\n    ; // eslint-disable-next-line\n  }, [router.query.restaurant, restaurants, router.query.id]);\n\n  var handleKeyDown = function handleKeyDown(e) {\n    // 37 arrow left / 39 arrow right\n    if (e.keyCode === 37) {\n      if (previousRestaurantRef.current) {\n        Router.push({\n          pathname: \"/detail/\".concat(previousRestaurantRef.current),\n          query: {\n            listedRestaurants: listedRestaurants\n          }\n        });\n      }\n\n      ;\n    } else if (e.keyCode === 39) {\n      if (nextRestaurantRef.current) {\n        Router.push({\n          pathname: \"/detail/\".concat(nextRestaurantRef.current),\n          query: {\n            listedRestaurants: listedRestaurants\n          }\n        });\n      }\n\n      ;\n    }\n\n    ;\n    scrollToTop();\n  };\n\n  var handleNavigation = function handleNavigation(direction, id) {\n    if (direction === \"left\") {\n      if (previousRestaurantRef.current) {\n        Router.push({\n          pathname: \"/detail/\".concat(previousRestaurantRef.current),\n          query: {\n            listedRestaurants: listedRestaurants\n          }\n        });\n      }\n\n      ;\n    } else if (direction === \"next-page\") {\n      Router.push({\n        pathname: \"/detail/\".concat(id),\n        query: {\n          listedRestaurants: listedRestaurants\n        }\n      });\n    } else if (direction === \"right\") {\n      if (nextRestaurantRef.current) {\n        Router.push({\n          pathname: \"/detail/\".concat(nextRestaurantRef.current),\n          query: {\n            listedRestaurants: listedRestaurants\n          }\n        });\n      }\n\n      ;\n    }\n\n    ;\n    scrollToTop();\n  };\n\n  useEffect(function () {\n    window.addEventListener(\"keydown\", handleKeyDown, true);\n    return function () {\n      return window.removeEventListener(\"keydown\", handleKeyDown, true);\n    }; // eslint-disable-next-line\n  }, []);\n  useEffect(function () {\n    var disclaimer = localStorage.getItem('has_seen_suggestion');\n    disclaimer ? setHasSeenSuggestion(true) : setHasSeenSuggestion(false);\n  }, []);\n  console.log(router.query);\n  return restaurant ? __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"detail-page-wrapper\"\n  }, __jsx(PopIn, {\n    setHasSeenSuggestion: setHasSeenSuggestion,\n    hasSeenSuggestion: hasSeenSuggestion\n  }), __jsx(TopSection, {\n    history: Router,\n    restaurant: restaurant,\n    location: router,\n    detailPageTop: detailPageTop\n  }), __jsx(MiddleSection, {\n    location: router,\n    restaurant: restaurant\n  }), __jsx(BottomSection, {\n    similarRestaurants: similarRestaurants,\n    handleNavigation: handleNavigation\n  })), __jsx(Footer, {\n    handleNavigation: handleNavigation,\n    previousRestaurantRef: previousRestaurantRef,\n    nextRestaurantRef: nextRestaurantRef,\n    hasSeenSuggestion: hasSeenSuggestion\n  })) : __jsx(\"div\", null, \"no restaurant corresponding\");\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    restaurants: state.restaurants\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    setRestaurants: setRestaurants\n  }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Detail));","map":{"version":3,"sources":["/Users/estellegresillon/Code/airbnb-redux/src/components/detail/detail.jsx"],"names":["React","useState","useEffect","useRef","connect","bindActionCreators","Router","withRouter","setRestaurants","PopIn","TopSection","MiddleSection","BottomSection","Footer","Detail","props","restaurants","router","restaurant","setRestaurant","hasSeenSuggestion","setHasSeenSuggestion","similarRestaurants","setSimilarRestaurants","nextRestaurantRef","previousRestaurantRef","detailPageTop","listedRestaurants","query","setNavigation","restaurantList","previous","next","forEach","val","i","id","toString","current","scrollToTop","scrollIntoView","filterByType","filter","type","name","slice","detailRestaurant","handleKeyDown","e","keyCode","push","pathname","handleNavigation","direction","window","addEventListener","removeEventListener","disclaimer","localStorage","getItem","console","log","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport Router from \"next/router\";\nimport { withRouter } from \"next/router\";\n\nimport { setRestaurants } from \"../../actions\";\nimport PopIn from \"./pop-in\";\nimport TopSection from \"./top-section\";\nimport MiddleSection from \"./middle-section\";\nimport BottomSection from \"./bottom-section\";\nimport Footer from \"./footer\";\n\nconst Detail = props => {\n  const { setRestaurants, restaurants, router } = props;\n  const [restaurant, setRestaurant] = useState({})\n  const [hasSeenSuggestion, setHasSeenSuggestion] = useState(false)\n  const [similarRestaurants, setSimilarRestaurants] = useState([])\n  const nextRestaurantRef = useRef(null);\n  const previousRestaurantRef = useRef(null);\n  const detailPageTop = useRef(null);\n  const listedRestaurants = router.query.listedRestaurants;\n  \n  const setNavigation = restaurantList => {\n    let previous;\n    let next;\n\n    restaurantList.forEach((val, i) => {\n      if (val.id.toString() === router.query.id) {\n        previous = restaurantList[i - 1];\n        next = restaurantList[i + 1];\n      };\n    });\n\n    if (previous) {\n      previousRestaurantRef.current = previous.id;\n    } else previousRestaurantRef.current = null;\n    if (next) {\n      nextRestaurantRef.current = next.id;\n    } else nextRestaurantRef.current = null;\n  };\n\n  const scrollToTop = () => {\n    detailPageTop.current.scrollIntoView();\n  }\n\n  // if a user arrives on the pageId directly \n  // he doesn't get the restaurantS or listedRestaurantS objects in the props\n  useEffect(() => { \n    if (!router.query.restaurant) {\n      setRestaurants(); \n    }\n  }, [router.query.restaurant, setRestaurants]);\n\n  useEffect(() => {\n    if (router.query.listedRestaurants) {\n      setNavigation(router.query.listedRestaurants);\n    } else {\n      setNavigation(restaurants);\n    };\n\n    if (router.query.restaurant) {\n      setRestaurant(router.query.restaurant);\n      const filterByType = [...restaurants].filter(val => {\n        if (val.type && val.name !== router.query.restaurant.name) {\n          return val.type === router.query.restaurant.type;\n        } else return null;\n      });\n  \n      setSimilarRestaurants(filterByType.slice(0, 9));\n    } else {\n      const detailRestaurant = [...restaurants].filter(val => {\n        if (val.id) {\n          return val.id.toString() === router.query.id;\n        } else return null;\n      });\n  \n      setRestaurant(detailRestaurant[0]);\n\n      const filterByType = [...restaurants].filter(val => {\n        if (val.type && val.name !== detailRestaurant[0].name) {\n          return val.type === detailRestaurant[0].type;\n        } else return null;\n      });\n  \n      setSimilarRestaurants(filterByType.slice(0, 9));\n    };\n  // eslint-disable-next-line\n  }, [router.query.restaurant, restaurants, router.query.id]);\n\n  const handleKeyDown = e => {\n    // 37 arrow left / 39 arrow right\n    if (e.keyCode === 37) {\n      if (previousRestaurantRef.current) {\n        Router.push({ pathname: `/detail/${previousRestaurantRef.current}`, query: { listedRestaurants } });\n      };\n    } else if (e.keyCode === 39) {\n      if (nextRestaurantRef.current) {\n        Router.push({ pathname: `/detail/${nextRestaurantRef.current}`, query: { listedRestaurants } });\n      };\n    };\n\n    scrollToTop();\n  };\n\n  const handleNavigation = (direction, id) => {\n    if (direction === \"left\") {\n      if (previousRestaurantRef.current) {\n        Router.push({ pathname: `/detail/${previousRestaurantRef.current}`, query: { listedRestaurants } });\n      };\n    } else if (direction === \"next-page\") {\n      Router.push({ pathname: `/detail/${id}`, query: { listedRestaurants } });\n    } else if (direction === \"right\") {\n      if (nextRestaurantRef.current) {\n        Router.push({ pathname: `/detail/${nextRestaurantRef.current}`, query: { listedRestaurants } });\n      };\n    };\n\n    scrollToTop();\n  };\n\n  useEffect(() => { \n    window.addEventListener(\"keydown\", handleKeyDown, true);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown, true);\n  // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    const disclaimer = localStorage.getItem('has_seen_suggestion');\n    disclaimer ? setHasSeenSuggestion(true) : setHasSeenSuggestion(false);\n  }, []);\n\n  console.log(router.query)\n\n  return restaurant ? (\n    <>\n      <div className=\"detail-page-wrapper\">\n        <PopIn \n          setHasSeenSuggestion={setHasSeenSuggestion}\n          hasSeenSuggestion={hasSeenSuggestion}\n        />\n        <TopSection\n          history={Router}\n          restaurant={restaurant}\n          location={router}\n          detailPageTop={detailPageTop}\n        />\n        <MiddleSection location={router} restaurant={restaurant} />\n        <BottomSection\n          similarRestaurants={similarRestaurants}\n          handleNavigation={handleNavigation}\n        />\n      </div>\n      <Footer\n        handleNavigation={handleNavigation}\n        previousRestaurantRef={previousRestaurantRef}\n        nextRestaurantRef={nextRestaurantRef}\n        hasSeenSuggestion={hasSeenSuggestion}\n      />\n    </>\n  ) :\n  <div>no restaurant corresponding</div>\n};\n\nconst mapStateToProps = state => {\n  return {\n    restaurants: state.restaurants,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({ setRestaurants }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Detail));\n"]},"metadata":{},"sourceType":"module"}