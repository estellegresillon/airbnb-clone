{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport Router from \"next/router\";\nimport { withRouter } from \"next/router\";\nimport { setRestaurants } from \"../../actions\";\nimport PopIn from \"./pop-in\";\nimport TopSection from \"./top-section\";\nimport MiddleSection from \"./middle-section\";\nimport BottomSection from \"./bottom-section\";\nimport Footer from \"./footer\";\n\nvar Detail = function Detail(props) {\n  var setRestaurants = props.setRestaurants,\n      restaurants = props.restaurants,\n      match = props.match,\n      router = props.router;\n\n  var _useState = useState({}),\n      restaurant = _useState[0],\n      setRestaurant = _useState[1];\n\n  var _useState2 = useState(false),\n      hasSeenSuggestion = _useState2[0],\n      setHasSeenSuggestion = _useState2[1];\n\n  var _useState3 = useState([]),\n      similarRestaurants = _useState3[0],\n      setSimilarRestaurants = _useState3[1];\n\n  var nextRestaurantRef = useRef(null);\n  var previousRestaurantRef = useRef(null);\n  var detailPageTop = useRef(null);\n  var listedRestaurants = router.query.listedRestaurants;\n\n  var setNavigation = function setNavigation(restaurantList) {\n    var previous;\n    var next;\n    restaurantList.forEach(function (val, i) {\n      if (val.id.toString() === match.params.id) {\n        previous = restaurantList[i - 1];\n        next = restaurantList[i + 1];\n      }\n\n      ;\n    });\n\n    if (previous) {\n      previousRestaurantRef.current = previous.id;\n    } else previousRestaurantRef.current = null;\n\n    if (next) {\n      nextRestaurantRef.current = next.id;\n    } else nextRestaurantRef.current = null;\n  };\n\n  var scrollToTop = function scrollToTop() {\n    detailPageTop.current.scrollIntoView();\n  }; // if a user arrives on the pageId directly \n  // he doesn't get the restaurantS or listedRestaurantS objects in the props\n\n\n  useEffect(function () {\n    if (!router.query.restaurant) {\n      setRestaurants();\n    }\n  }, [router.query.restaurant, setRestaurants]);\n  useEffect(function () {\n    if (router.query.listedRestaurants) {\n      setNavigation(router.query.listedRestaurants);\n    } else {\n      setNavigation(restaurants);\n    }\n\n    ;\n\n    if (router.query.restaurant) {\n      setRestaurant(router.query.restaurant);\n\n      var filterByType = _toConsumableArray(restaurants).filter(function (val) {\n        if (val.type && val.name !== router.query.restaurant.name) {\n          return val.type === router.query.restaurant.type;\n        } else return null;\n      });\n\n      setSimilarRestaurants(filterByType.slice(0, 9));\n    } else {\n      var detailRestaurant = _toConsumableArray(restaurants).filter(function (val) {\n        if (val.id) {\n          return val.id.toString() === match.params.id;\n        } else return null;\n      });\n\n      setRestaurant(detailRestaurant[0]);\n\n      var _filterByType = _toConsumableArray(restaurants).filter(function (val) {\n        if (val.type && val.name !== detailRestaurant[0].name) {\n          return val.type === detailRestaurant[0].type;\n        } else return null;\n      });\n\n      setSimilarRestaurants(_filterByType.slice(0, 9));\n    }\n\n    ; // eslint-disable-next-line\n  }, [router.query.restaurant, restaurants, match.params.id]);\n\n  var handleKeyDown = function handleKeyDown(e) {\n    // 37 arrow left / 39 arrow right\n    if (e.keyCode === 37) {\n      if (previousRestaurantRef.current) {\n        Router.push({\n          pathname: \"/detail/\".concat(previousRestaurantRef.current),\n          query: {\n            listedRestaurants: listedRestaurants\n          }\n        });\n      }\n\n      ;\n    } else if (e.keyCode === 39) {\n      if (nextRestaurantRef.current) {\n        Router.push({\n          pathname: \"/detail/\".concat(nextRestaurantRef.current),\n          query: {\n            listedRestaurants: listedRestaurants\n          }\n        });\n      }\n\n      ;\n    }\n\n    ;\n    scrollToTop();\n  };\n\n  var handleNavigation = function handleNavigation(direction, id) {\n    if (direction === \"left\") {\n      if (previousRestaurantRef.current) {\n        Router.push({\n          pathname: \"/detail/\".concat(previousRestaurantRef.current),\n          query: {\n            listedRestaurants: listedRestaurants\n          }\n        });\n      }\n\n      ;\n    } else if (direction === \"next-page\") {\n      Router.push({\n        pathname: \"/detail/\".concat(id),\n        query: {\n          listedRestaurants: listedRestaurants\n        }\n      });\n    } else if (direction === \"right\") {\n      if (nextRestaurantRef.current) {\n        Router.push({\n          pathname: \"/detail/\".concat(nextRestaurantRef.current),\n          query: {\n            listedRestaurants: listedRestaurants\n          }\n        });\n      }\n\n      ;\n    }\n\n    ;\n    scrollToTop();\n  };\n\n  useEffect(function () {\n    window.addEventListener(\"keydown\", handleKeyDown, true);\n    return function () {\n      return window.removeEventListener(\"keydown\", handleKeyDown, true);\n    }; // eslint-disable-next-line\n  }, []);\n  useEffect(function () {\n    var disclaimer = localStorage.getItem('has_seen_suggestion');\n    disclaimer ? setHasSeenSuggestion(true) : setHasSeenSuggestion(false);\n  }, []);\n  return restaurant ? __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"detail-page-wrapper\"\n  }, __jsx(PopIn, {\n    setHasSeenSuggestion: setHasSeenSuggestion,\n    hasSeenSuggestion: hasSeenSuggestion\n  }), __jsx(TopSection, {\n    history: Router,\n    restaurant: restaurant,\n    location: router.query,\n    detailPageTop: detailPageTop\n  }), __jsx(MiddleSection, {\n    location: router.query,\n    restaurant: restaurant\n  }), __jsx(BottomSection, {\n    similarRestaurants: similarRestaurants,\n    handleNavigation: handleNavigation\n  })), __jsx(Footer, {\n    handleNavigation: handleNavigation,\n    previousRestaurantRef: previousRestaurantRef,\n    nextRestaurantRef: nextRestaurantRef,\n    hasSeenSuggestion: hasSeenSuggestion\n  })) : __jsx(\"div\", null, \"no restaurant corresponding\");\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    restaurants: state.restaurants\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    setRestaurants: setRestaurants\n  }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Detail));","map":{"version":3,"sources":["/Users/estellegresillon/Code/airbnb-redux/src/components/detail/detail.jsx"],"names":["React","useState","useEffect","useRef","connect","bindActionCreators","Router","withRouter","setRestaurants","PopIn","TopSection","MiddleSection","BottomSection","Footer","Detail","props","restaurants","match","router","restaurant","setRestaurant","hasSeenSuggestion","setHasSeenSuggestion","similarRestaurants","setSimilarRestaurants","nextRestaurantRef","previousRestaurantRef","detailPageTop","listedRestaurants","query","setNavigation","restaurantList","previous","next","forEach","val","i","id","toString","params","current","scrollToTop","scrollIntoView","filterByType","filter","type","name","slice","detailRestaurant","handleKeyDown","e","keyCode","push","pathname","handleNavigation","direction","window","addEventListener","removeEventListener","disclaimer","localStorage","getItem","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport Router from \"next/router\";\nimport { withRouter } from \"next/router\";\n\nimport { setRestaurants } from \"../../actions\";\nimport PopIn from \"./pop-in\";\nimport TopSection from \"./top-section\";\nimport MiddleSection from \"./middle-section\";\nimport BottomSection from \"./bottom-section\";\nimport Footer from \"./footer\";\n\nconst Detail = props => {\n  const { setRestaurants, restaurants, match, router } = props;\n  const [restaurant, setRestaurant] = useState({})\n  const [hasSeenSuggestion, setHasSeenSuggestion] = useState(false)\n  const [similarRestaurants, setSimilarRestaurants] = useState([])\n  const nextRestaurantRef = useRef(null);\n  const previousRestaurantRef = useRef(null);\n  const detailPageTop = useRef(null);\n  const listedRestaurants = router.query.listedRestaurants;\n  \n  const setNavigation = restaurantList => {\n    let previous;\n    let next;\n\n    restaurantList.forEach((val, i) => {\n      if (val.id.toString() === match.params.id) {\n        previous = restaurantList[i - 1];\n        next = restaurantList[i + 1];\n      };\n    });\n\n    if (previous) {\n      previousRestaurantRef.current = previous.id;\n    } else previousRestaurantRef.current = null;\n    if (next) {\n      nextRestaurantRef.current = next.id;\n    } else nextRestaurantRef.current = null;\n  };\n\n  const scrollToTop = () => {\n    detailPageTop.current.scrollIntoView();\n  }\n\n  // if a user arrives on the pageId directly \n  // he doesn't get the restaurantS or listedRestaurantS objects in the props\n  useEffect(() => { \n    if (!router.query.restaurant) {\n      setRestaurants(); \n    }\n  }, [router.query.restaurant, setRestaurants]);\n\n  useEffect(() => {\n    if (router.query.listedRestaurants) {\n      setNavigation(router.query.listedRestaurants);\n    } else {\n      setNavigation(restaurants);\n    };\n\n    if (router.query.restaurant) {\n      setRestaurant(router.query.restaurant);\n      const filterByType = [...restaurants].filter(val => {\n        if (val.type && val.name !== router.query.restaurant.name) {\n          return val.type === router.query.restaurant.type;\n        } else return null;\n      });\n  \n      setSimilarRestaurants(filterByType.slice(0, 9));\n    } else {\n      const detailRestaurant = [...restaurants].filter(val => {\n        if (val.id) {\n          return val.id.toString() === match.params.id;\n        } else return null;\n      });\n  \n      setRestaurant(detailRestaurant[0]);\n\n      const filterByType = [...restaurants].filter(val => {\n        if (val.type && val.name !== detailRestaurant[0].name) {\n          return val.type === detailRestaurant[0].type;\n        } else return null;\n      });\n  \n      setSimilarRestaurants(filterByType.slice(0, 9));\n    };\n  // eslint-disable-next-line\n  }, [router.query.restaurant, restaurants, match.params.id]);\n\n  const handleKeyDown = e => {\n    // 37 arrow left / 39 arrow right\n    if (e.keyCode === 37) {\n      if (previousRestaurantRef.current) {\n        Router.push({ pathname: `/detail/${previousRestaurantRef.current}`, query: { listedRestaurants } });\n      };\n    } else if (e.keyCode === 39) {\n      if (nextRestaurantRef.current) {\n        Router.push({ pathname: `/detail/${nextRestaurantRef.current}`, query: { listedRestaurants } });\n      };\n    };\n\n    scrollToTop();\n  };\n\n  const handleNavigation = (direction, id) => {\n    if (direction === \"left\") {\n      if (previousRestaurantRef.current) {\n        Router.push({ pathname: `/detail/${previousRestaurantRef.current}`, query: { listedRestaurants } });\n      };\n    } else if (direction === \"next-page\") {\n      Router.push({ pathname: `/detail/${id}`, query: { listedRestaurants } });\n    } else if (direction === \"right\") {\n      if (nextRestaurantRef.current) {\n        Router.push({ pathname: `/detail/${nextRestaurantRef.current}`, query: { listedRestaurants } });\n      };\n    };\n\n    scrollToTop();\n  };\n\n  useEffect(() => { \n    window.addEventListener(\"keydown\", handleKeyDown, true);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown, true);\n  // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    const disclaimer = localStorage.getItem('has_seen_suggestion');\n    disclaimer ? setHasSeenSuggestion(true) : setHasSeenSuggestion(false);\n  }, []);\n\n  return restaurant ? (\n    <>\n      <div className=\"detail-page-wrapper\">\n        <PopIn \n          setHasSeenSuggestion={setHasSeenSuggestion}\n          hasSeenSuggestion={hasSeenSuggestion}\n        />\n        <TopSection\n          history={Router}\n          restaurant={restaurant}\n          location={router.query}\n          detailPageTop={detailPageTop}\n        />\n        <MiddleSection location={router.query} restaurant={restaurant} />\n        <BottomSection\n          similarRestaurants={similarRestaurants}\n          handleNavigation={handleNavigation}\n        />\n      </div>\n      <Footer\n        handleNavigation={handleNavigation}\n        previousRestaurantRef={previousRestaurantRef}\n        nextRestaurantRef={nextRestaurantRef}\n        hasSeenSuggestion={hasSeenSuggestion}\n      />\n    </>\n  ) :\n  <div>no restaurant corresponding</div>\n};\n\nconst mapStateToProps = state => {\n  return {\n    restaurants: state.restaurants,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({ setRestaurants }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Detail));\n"]},"metadata":{},"sourceType":"module"}