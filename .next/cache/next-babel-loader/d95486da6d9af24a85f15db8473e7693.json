{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport Router from \"next/router\";\nimport { withRouter } from \"next/router\";\nimport { setRestaurants } from \"../../actions\";\nimport PopIn from \"./pop-in\";\nimport TopSection from \"./top-section\";\nimport MiddleSection from \"./middle-section\";\nimport BottomSection from \"./bottom-section\";\nimport Footer from \"./footer\";\n\nconst Detail = props => {\n  const {\n    setRestaurants,\n    restaurants,\n    router\n  } = props;\n  const {\n    0: restaurant,\n    1: setRestaurant\n  } = useState({});\n  const {\n    0: hasSeenSuggestion,\n    1: setHasSeenSuggestion\n  } = useState(false);\n  const {\n    0: similarRestaurants,\n    1: setSimilarRestaurants\n  } = useState([]);\n  const nextRestaurantRef = useRef(null);\n  const previousRestaurantRef = useRef(null);\n  const detailPageTop = useRef(null);\n  const listedRestaurants = router.query.listedRestaurants;\n\n  const setNavigation = restaurantList => {\n    let previous;\n    let next;\n    restaurantList.forEach((val, i) => {\n      if (val.id.toString() === router.query.id) {\n        previous = restaurantList[i - 1];\n        next = restaurantList[i + 1];\n      }\n\n      ;\n    });\n\n    if (previous) {\n      previousRestaurantRef.current = previous.id;\n    } else previousRestaurantRef.current = null;\n\n    if (next) {\n      nextRestaurantRef.current = next.id;\n    } else nextRestaurantRef.current = null;\n  };\n\n  const scrollToTop = () => {\n    detailPageTop.current.scrollIntoView();\n  }; // if a user arrives on the pageId directly \n  // he doesn't get the restaurantS or listedRestaurantS objects in the props\n\n\n  useEffect(() => {\n    if (!router.query.restaurant) {\n      setRestaurants();\n    }\n  }, [router.query.restaurant, setRestaurants]);\n  useEffect(() => {\n    if (router.query.listedRestaurants) {\n      setNavigation(router.query.listedRestaurants);\n    } else {\n      setNavigation(restaurants);\n    }\n\n    ;\n\n    if (router.query.restaurant) {\n      setRestaurant(router.query.restaurant);\n      const filterByType = [...restaurants].filter(val => {\n        if (val.type && val.name !== router.query.restaurant.name) {\n          return val.type === router.query.restaurant.type;\n        } else return null;\n      });\n      setSimilarRestaurants(filterByType.slice(0, 9));\n    } else {\n      const detailRestaurant = [...restaurants].filter(val => {\n        if (val.id) {\n          return val.id.toString() === router.query.id;\n        } else return null;\n      });\n      setRestaurant(detailRestaurant[0]);\n      const filterByType = [...restaurants].filter(val => {\n        if (val.type && val.name !== detailRestaurant[0].name) {\n          return val.type === detailRestaurant[0].type;\n        } else return null;\n      });\n      setSimilarRestaurants(filterByType.slice(0, 9));\n    }\n\n    ; // eslint-disable-next-line\n  }, [router.query.restaurant, restaurants, router.query.id]);\n\n  const handleKeyDown = e => {\n    // 37 arrow left / 39 arrow right\n    if (e.keyCode === 37) {\n      if (previousRestaurantRef.current) {\n        Router.push({\n          pathname: `/detail/${previousRestaurantRef.current}`,\n          query: {\n            listedRestaurants\n          }\n        }, `/detail/${previousRestaurantRef.current}`);\n      }\n\n      ;\n    } else if (e.keyCode === 39) {\n      if (nextRestaurantRef.current) {\n        Router.push({\n          pathname: `/detail/${nextRestaurantRef.current}`,\n          query: {\n            listedRestaurants\n          }\n        });\n      }\n\n      ;\n    }\n\n    ;\n    scrollToTop();\n  };\n\n  const handleNavigation = (direction, id) => {\n    if (direction === \"left\") {\n      if (previousRestaurantRef.current) {\n        Router.push({\n          pathname: `/detail/${previousRestaurantRef.current}`,\n          query: {\n            listedRestaurants\n          }\n        });\n      }\n\n      ;\n    } else if (direction === \"next-page\") {\n      Router.push({\n        pathname: `/detail/${id}`,\n        query: {\n          listedRestaurants\n        }\n      });\n    } else if (direction === \"right\") {\n      if (nextRestaurantRef.current) {\n        Router.push({\n          pathname: `/detail/${nextRestaurantRef.current}`,\n          query: {\n            listedRestaurants\n          }\n        });\n      }\n\n      ;\n    }\n\n    ;\n    scrollToTop();\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown, true);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown, true); // eslint-disable-next-line\n  }, []);\n  useEffect(() => {\n    const disclaimer = localStorage.getItem('has_seen_suggestion');\n    disclaimer ? setHasSeenSuggestion(true) : setHasSeenSuggestion(false);\n  }, []);\n  console.log(router.query);\n  return restaurant ? __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"detail-page-wrapper\"\n  }, __jsx(PopIn, {\n    setHasSeenSuggestion: setHasSeenSuggestion,\n    hasSeenSuggestion: hasSeenSuggestion\n  }), __jsx(TopSection, {\n    history: Router,\n    restaurant: restaurant,\n    location: router,\n    detailPageTop: detailPageTop\n  }), __jsx(MiddleSection, {\n    location: router,\n    restaurant: restaurant\n  }), __jsx(BottomSection, {\n    similarRestaurants: similarRestaurants,\n    handleNavigation: handleNavigation\n  })), __jsx(Footer, {\n    handleNavigation: handleNavigation,\n    previousRestaurantRef: previousRestaurantRef,\n    nextRestaurantRef: nextRestaurantRef,\n    hasSeenSuggestion: hasSeenSuggestion\n  })) : __jsx(\"div\", null, \"no restaurant corresponding\");\n};\n\nconst mapStateToProps = state => {\n  return {\n    restaurants: state.restaurants\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    setRestaurants\n  }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Detail));","map":{"version":3,"sources":["/Users/estellegresillon/Code/airbnb-redux/src/components/detail/detail.jsx"],"names":["React","useState","useEffect","useRef","connect","bindActionCreators","Router","withRouter","setRestaurants","PopIn","TopSection","MiddleSection","BottomSection","Footer","Detail","props","restaurants","router","restaurant","setRestaurant","hasSeenSuggestion","setHasSeenSuggestion","similarRestaurants","setSimilarRestaurants","nextRestaurantRef","previousRestaurantRef","detailPageTop","listedRestaurants","query","setNavigation","restaurantList","previous","next","forEach","val","i","id","toString","current","scrollToTop","scrollIntoView","filterByType","filter","type","name","slice","detailRestaurant","handleKeyDown","e","keyCode","push","pathname","handleNavigation","direction","window","addEventListener","removeEventListener","disclaimer","localStorage","getItem","console","log","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport Router from \"next/router\";\nimport { withRouter } from \"next/router\";\n\nimport { setRestaurants } from \"../../actions\";\nimport PopIn from \"./pop-in\";\nimport TopSection from \"./top-section\";\nimport MiddleSection from \"./middle-section\";\nimport BottomSection from \"./bottom-section\";\nimport Footer from \"./footer\";\n\nconst Detail = props => {\n  const { setRestaurants, restaurants, router } = props;\n  const [restaurant, setRestaurant] = useState({})\n  const [hasSeenSuggestion, setHasSeenSuggestion] = useState(false)\n  const [similarRestaurants, setSimilarRestaurants] = useState([])\n  const nextRestaurantRef = useRef(null);\n  const previousRestaurantRef = useRef(null);\n  const detailPageTop = useRef(null);\n  const listedRestaurants = router.query.listedRestaurants;\n  \n  const setNavigation = restaurantList => {\n    let previous;\n    let next;\n\n    restaurantList.forEach((val, i) => {\n      if (val.id.toString() === router.query.id) {\n        previous = restaurantList[i - 1];\n        next = restaurantList[i + 1];\n      };\n    });\n\n    if (previous) {\n      previousRestaurantRef.current = previous.id;\n    } else previousRestaurantRef.current = null;\n    if (next) {\n      nextRestaurantRef.current = next.id;\n    } else nextRestaurantRef.current = null;\n  };\n\n  const scrollToTop = () => {\n    detailPageTop.current.scrollIntoView();\n  }\n\n  // if a user arrives on the pageId directly \n  // he doesn't get the restaurantS or listedRestaurantS objects in the props\n  useEffect(() => { \n    if (!router.query.restaurant) {\n      setRestaurants(); \n    }\n  }, [router.query.restaurant, setRestaurants]);\n\n  useEffect(() => {\n    if (router.query.listedRestaurants) {\n      setNavigation(router.query.listedRestaurants);\n    } else {\n      setNavigation(restaurants);\n    };\n\n    if (router.query.restaurant) {\n      setRestaurant(router.query.restaurant);\n      const filterByType = [...restaurants].filter(val => {\n        if (val.type && val.name !== router.query.restaurant.name) {\n          return val.type === router.query.restaurant.type;\n        } else return null;\n      });\n  \n      setSimilarRestaurants(filterByType.slice(0, 9));\n    } else {\n      const detailRestaurant = [...restaurants].filter(val => {\n        if (val.id) {\n          return val.id.toString() === router.query.id;\n        } else return null;\n      });\n  \n      setRestaurant(detailRestaurant[0]);\n\n      const filterByType = [...restaurants].filter(val => {\n        if (val.type && val.name !== detailRestaurant[0].name) {\n          return val.type === detailRestaurant[0].type;\n        } else return null;\n      });\n  \n      setSimilarRestaurants(filterByType.slice(0, 9));\n    };\n  // eslint-disable-next-line\n  }, [router.query.restaurant, restaurants, router.query.id]);\n\n  const handleKeyDown = e => {\n    // 37 arrow left / 39 arrow right\n    if (e.keyCode === 37) {\n      if (previousRestaurantRef.current) {\n        Router.push({ pathname: `/detail/${previousRestaurantRef.current}`, query: { listedRestaurants }}, `/detail/${previousRestaurantRef.current}`);\n      };\n    } else if (e.keyCode === 39) {\n      if (nextRestaurantRef.current) {\n        Router.push({ pathname: `/detail/${nextRestaurantRef.current}`, query: { listedRestaurants } });\n      };\n    };\n\n    scrollToTop();\n  };\n\n  const handleNavigation = (direction, id) => {\n    if (direction === \"left\") {\n      if (previousRestaurantRef.current) {\n        Router.push({ pathname: `/detail/${previousRestaurantRef.current}`, query: { listedRestaurants } });\n      };\n    } else if (direction === \"next-page\") {\n      Router.push({ pathname: `/detail/${id}`, query: { listedRestaurants } });\n    } else if (direction === \"right\") {\n      if (nextRestaurantRef.current) {\n        Router.push({ pathname: `/detail/${nextRestaurantRef.current}`, query: { listedRestaurants } });\n      };\n    };\n\n    scrollToTop();\n  };\n\n  useEffect(() => { \n    window.addEventListener(\"keydown\", handleKeyDown, true);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown, true);\n  // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    const disclaimer = localStorage.getItem('has_seen_suggestion');\n    disclaimer ? setHasSeenSuggestion(true) : setHasSeenSuggestion(false);\n  }, []);\n\n  console.log(router.query)\n\n  return restaurant ? (\n    <>\n      <div className=\"detail-page-wrapper\">\n        <PopIn \n          setHasSeenSuggestion={setHasSeenSuggestion}\n          hasSeenSuggestion={hasSeenSuggestion}\n        />\n        <TopSection\n          history={Router}\n          restaurant={restaurant}\n          location={router}\n          detailPageTop={detailPageTop}\n        />\n        <MiddleSection location={router} restaurant={restaurant} />\n        <BottomSection\n          similarRestaurants={similarRestaurants}\n          handleNavigation={handleNavigation}\n        />\n      </div>\n      <Footer\n        handleNavigation={handleNavigation}\n        previousRestaurantRef={previousRestaurantRef}\n        nextRestaurantRef={nextRestaurantRef}\n        hasSeenSuggestion={hasSeenSuggestion}\n      />\n    </>\n  ) :\n  <div>no restaurant corresponding</div>\n};\n\nconst mapStateToProps = state => {\n  return {\n    restaurants: state.restaurants,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({ setRestaurants }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Detail));\n"]},"metadata":{},"sourceType":"module"}