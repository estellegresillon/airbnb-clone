{"ast":null,"code":"var _jsxFileName = \"/Users/estellegresillon/Code/airbnb-redux/src/components/restaurants/map.jsx\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { compose } from \"recompose\";\nimport { withScriptjs, withGoogleMap, GoogleMap, Marker, InfoWindow } from \"react-google-maps\";\nimport { selectRestaurant } from \"../../actions\";\nimport GOOGLE_MAP_CUSTOM_SKIN from \"../../constants/google-map-skin\";\nimport { setCoordinatesWithLocation } from \"../../constants/locations-coordinates\";\n\nconst MapContainer = props => {\n  const {\n    selectRestaurant,\n    selectedRestaurant,\n    listedRestaurants,\n    showMap,\n    selectedLocation\n  } = props;\n\n  const onClick = marker => {\n    selectRestaurant(marker);\n  };\n\n  return showMap ? __jsx(\"div\", {\n    className: \"google-map\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }, __jsx(MapView, {\n    selectedMarker: selectedRestaurant,\n    selectedLocation: selectedLocation,\n    markers: listedRestaurants,\n    onClick: onClick,\n    googleMapURL: process.env.REACT_APP_GOOGLE_API_KEY,\n    loadingElement: __jsx(\"div\", {\n      style: {\n        height: `100%`\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    }),\n    containerElement: __jsx(\"div\", {\n      style: {\n        height: `100%`\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34\n      },\n      __self: this\n    }),\n    mapElement: __jsx(\"div\", {\n      style: {\n        height: `100%`\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  })) : null;\n};\n\nconst MapView = compose(withScriptjs, withGoogleMap)(props => {\n  const {\n    markers,\n    onClick,\n    selectedMarker,\n    selectedLocation\n  } = props;\n  const {\n    0: newCenter,\n    1: setNewCenter\n  } = useState({\n    lat: 48.863,\n    lng: 2.34\n  }); // center on pin if only one restaurant is selected, else center to whole paris area\n\n  useEffect(() => {\n    if (markers.length === 1) {\n      setNewCenter({\n        lat: markers[0].lat,\n        lng: markers[0].lng\n      });\n    } else {\n      if (selectedLocation) {\n        setCoordinatesWithLocation(selectedLocation, setNewCenter);\n      } else {\n        setNewCenter({\n          lat: 48.863,\n          lng: 2.34\n        });\n      }\n\n      ;\n    }\n\n    ;\n  }, [markers, selectedLocation]);\n  return __jsx(GoogleMap, {\n    defaultZoom: 13,\n    defaultOptions: {\n      styles: GOOGLE_MAP_CUSTOM_SKIN\n    },\n    center: newCenter,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, markers.map(marker => {\n    const onMarkerClick = onClick.bind(this, marker);\n    return __jsx(Marker, {\n      key: marker.id,\n      onClick: onMarkerClick,\n      position: {\n        lat: marker.lat,\n        lng: marker.lng\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, selectedMarker === marker && __jsx(InfoWindow, {\n      style: {\n        padding: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, __jsx(Link, {\n      to: {\n        pathname: `/detail/${marker.id}`,\n        restaurant: marker\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"marker-info-window\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, __jsx(\"img\", {\n      src: marker.imageUrl,\n      alt: \"restaurant-preview\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), __jsx(\"div\", {\n      className: \"marker-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, __jsx(\"i\", {\n      className: \"fas fa-star\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), __jsx(\"span\", {\n      className: \"marker-rating\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, marker.rate, \" (\", marker.votes, \"+)\")), __jsx(\"div\", {\n      className: \"marker-restaurant-name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, marker.name), __jsx(\"div\", {\n      className: \"marker-restaurant-type\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, marker.type)))));\n  }));\n});\n\nconst mapStateToProps = state => {\n  return {\n    selectedRestaurant: state.selectedRestaurant,\n    showMap: state.showMap,\n    selectedLocation: state.selectedLocation\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    selectRestaurant\n  }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MapContainer);","map":{"version":3,"sources":["/Users/estellegresillon/Code/airbnb-redux/src/components/restaurants/map.jsx"],"names":["React","useState","useEffect","Link","bindActionCreators","connect","compose","withScriptjs","withGoogleMap","GoogleMap","Marker","InfoWindow","selectRestaurant","GOOGLE_MAP_CUSTOM_SKIN","setCoordinatesWithLocation","MapContainer","props","selectedRestaurant","listedRestaurants","showMap","selectedLocation","onClick","marker","process","env","REACT_APP_GOOGLE_API_KEY","height","MapView","markers","selectedMarker","newCenter","setNewCenter","lat","lng","length","styles","map","onMarkerClick","bind","id","padding","pathname","restaurant","imageUrl","rate","votes","name","type","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Link } from \"react-router-dom\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { compose } from \"recompose\"\nimport {\n  withScriptjs,\n  withGoogleMap,\n  GoogleMap,\n  Marker,\n  InfoWindow\n} from \"react-google-maps\"\n\nimport { selectRestaurant } from \"../../actions\";\nimport GOOGLE_MAP_CUSTOM_SKIN from \"../../constants/google-map-skin\";\nimport { setCoordinatesWithLocation } from \"../../constants/locations-coordinates\";\n\nconst MapContainer = props =>{\n  const { selectRestaurant, selectedRestaurant, listedRestaurants, showMap, selectedLocation } = props;\n\n  const onClick = marker => {\n    selectRestaurant(marker);\n  };\n\n  return showMap ? (\n    <div className=\"google-map\">\n      <MapView\n        selectedMarker={selectedRestaurant}\n        selectedLocation={selectedLocation}\n        markers={listedRestaurants}\n        onClick={onClick}\n        googleMapURL={process.env.REACT_APP_GOOGLE_API_KEY}\n        loadingElement={<div style={{ height: `100%` }} />}\n        containerElement={<div style={{ height: `100%` }} />}\n        mapElement={<div style={{ height: `100%` }} />}\n      />\n    </div>\n  ) : null;\n};\n\nconst MapView = compose(withScriptjs, withGoogleMap)(props => {\n  const { markers, onClick, selectedMarker, selectedLocation } = props;\n  const [newCenter, setNewCenter] = useState({ lat: 48.863, lng: 2.34 });\n\n  // center on pin if only one restaurant is selected, else center to whole paris area\n  useEffect(() => {\n    if (markers.length === 1) {\n      setNewCenter({ lat: markers[0].lat, lng: markers[0].lng });\n    } else {\n      if (selectedLocation) {\n        setCoordinatesWithLocation(selectedLocation, setNewCenter);\n      } else {\n        setNewCenter({ lat: 48.863, lng: 2.34 });\n      };\n    };\n  }, [markers, selectedLocation]);\n\n  return (\n    <GoogleMap \n      defaultZoom={13}\n      defaultOptions={{ styles: GOOGLE_MAP_CUSTOM_SKIN }}\n      center={newCenter}>\n      {markers.map(marker => {\n        const onMarkerClick = onClick.bind(this, marker);\n        return (\n          <Marker\n            key={marker.id}\n            onClick={onMarkerClick}\n            position={{ lat: marker.lat, lng: marker.lng }}\n          >\n            {selectedMarker === marker &&\n              <InfoWindow style={{ padding: 0 }}>\n                <Link to={{pathname: `/detail/${marker.id}`, restaurant: marker}}>\n                  <div className=\"marker-info-window\">\n                    <img src={marker.imageUrl} alt=\"restaurant-preview\" />\n                    <div className=\"marker-header\">\n                      <i className=\"fas fa-star\" />\n                      <span className=\"marker-rating\">{marker.rate} ({marker.votes}+)</span>\n                    </div>\n                    <div className=\"marker-restaurant-name\">{marker.name}</div>\n                    <div className=\"marker-restaurant-type\">{marker.type}</div>\n                  </div>\n                </Link>\n              </InfoWindow>}\n          </Marker>\n        )\n      })}\n    </GoogleMap>\n  );\n});\n\nconst mapStateToProps = state => {\n  return {\n    selectedRestaurant: state.selectedRestaurant,\n    showMap: state.showMap,\n    selectedLocation: state.selectedLocation,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({ selectRestaurant }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MapContainer);\n"]},"metadata":{},"sourceType":"module"}